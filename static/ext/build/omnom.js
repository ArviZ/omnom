/*! For license information please see omnom.js.LICENSE.txt */
(()=>{"use strict";(()=>{var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}function n(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}function r(t,e){for(var n=0,o=e.length,r=t.length;n<o;n++,r++)t[r]=e[n];return t}function i(t){return"function"==typeof t}function s(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}Object.create,Object.create;var a=s((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function c(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var u=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}var e;return t.prototype.unsubscribe=function(){var t,e,s,c,u;if(!this.closed){this.closed=!0;var l=this._parentage;if(l)if(this._parentage=null,Array.isArray(l))try{for(var d=n(l),p=d.next();!p.done;p=d.next())p.value.remove(this)}catch(e){t={error:e}}finally{try{p&&!p.done&&(e=d.return)&&e.call(d)}finally{if(t)throw t.error}}else l.remove(this);var h=this.initialTeardown;if(i(h))try{h()}catch(t){u=t instanceof a?t.errors:[t]}var m=this._teardowns;if(m){this._teardowns=null;try{for(var y=n(m),v=y.next();!v.done;v=y.next()){var b=v.value;try{f(b)}catch(t){u=null!=u?u:[],t instanceof a?u=r(r([],o(u)),o(t.errors)):u.push(t)}}}catch(t){s={error:t}}finally{try{v&&!v.done&&(c=y.return)&&c.call(y)}finally{if(s)throw s.error}}}if(u)throw new a(u)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)f(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(n=this._teardowns)&&void 0!==n?n:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&c(e,t)},t.prototype.remove=function(e){var n=this._teardowns;n&&c(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),l=u.EMPTY;function d(t){return t instanceof u||t&&"closed"in t&&i(t.remove)&&i(t.add)&&i(t.unsubscribe)}function f(t){i(t)?t():t.unsubscribe()}var p=null,h=null,m=void 0,y=!1,v=!1,b={setTimeout:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=b.delegate;return((null==n?void 0:n.setTimeout)||setTimeout).apply(void 0,r([],o(t)))},clearTimeout:function(t){var e=b.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function g(t){b.setTimeout((function(){if(!p)throw t;p(t)}))}function w(){}var S=E("C",void 0,void 0);function E(t,e,n){return{kind:t,value:e,error:n}}var _=null;function T(t){if(y){var e=!_;if(e&&(_={errorThrown:!1,error:null}),t(),e){var n=_,o=n.errorThrown,r=n.error;if(_=null,o)throw r}}else t()}function C(t){y&&_&&(_.errorThrown=!0,_.error=t)}var x=function(t){function n(e){var n=t.call(this)||this;return n.isStopped=!1,e?(n.destination=e,d(e)&&e.add(n)):n.destination=N,n}return e(n,t),n.create=function(t,e,n){return new P(t,e,n)},n.prototype.next=function(t){this.isStopped?L(function(t){return E("N",t,void 0)}(t),this):this._next(t)},n.prototype.error=function(t){this.isStopped?L(E("E",void 0,t),this):(this.isStopped=!0,this._error(t))},n.prototype.complete=function(){this.isStopped?L(S,this):(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},n.prototype._next=function(t){this.destination.next(t)},n.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},n.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},n}(u),P=function(t){function n(e,n,o){var r,s=t.call(this)||this;if(i(e))r=e;else if(e){var a;r=e.next,n=e.error,o=e.complete,s&&v?(a=Object.create(e)).unsubscribe=function(){return s.unsubscribe()}:a=e,r=null==r?void 0:r.bind(a),n=null==n?void 0:n.bind(a),o=null==o?void 0:o.bind(a)}return s.destination={next:r?I(r):w,error:I(null!=n?n:k),complete:o?I(o):w},s}return e(n,t),n}(x);function I(t,e){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{t.apply(void 0,r([],o(e)))}catch(t){y?C(t):g(t)}}}function k(t){throw t}function L(t,e){var n=h;n&&b.setTimeout((function(){return n(t,e)}))}var N={closed:!0,next:w,error:k,complete:w},B="function"==typeof Symbol&&Symbol.observable||"@@observable";function M(t){return t}function j(t){return 0===t.length?M:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var R=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var o,r=this,s=(o=t)&&o instanceof x||function(t){return t&&i(t.next)&&i(t.error)&&i(t.complete)}(o)&&d(o)?t:new P(t,e,n);return T((function(){var t=r,e=t.operator,n=t.source;s.add(e?e.call(s,n):n?r._subscribe(s):r._trySubscribe(s))})),s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=$(e))((function(e,o){var r;r=n.subscribe((function(e){try{t(e)}catch(t){o(t),null==r||r.unsubscribe()}}),o,e)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[B]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return j(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=$(t))((function(t,n){var o;e.subscribe((function(t){return o=t}),(function(t){return n(t)}),(function(){return t(o)}))}))},t.create=function(e){return new t(e)},t}();function $(t){var e;return null!==(e=null!=t?t:m)&&void 0!==e?e:Promise}var O=s((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),A=function(t){function o(){var e=t.call(this)||this;return e.closed=!1,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return e(o,t),o.prototype.lift=function(t){var e=new q(this,this);return e.operator=t,e},o.prototype._throwIfClosed=function(){if(this.closed)throw new O},o.prototype.next=function(t){var e=this;T((function(){var o,r;if(e._throwIfClosed(),!e.isStopped){var i=e.observers.slice();try{for(var s=n(i),a=s.next();!a.done;a=s.next())a.value.next(t)}catch(t){o={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}}}))},o.prototype.error=function(t){var e=this;T((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var n=e.observers;n.length;)n.shift().error(t)}}))},o.prototype.complete=function(){var t=this;T((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},o.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(o.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),o.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},o.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},o.prototype._innerSubscribe=function(t){var e=this,n=e.hasError,o=e.isStopped,r=e.observers;return n||o?l:(r.push(t),new u((function(){return c(r,t)})))},o.prototype._checkFinalizedStatuses=function(t){var e=this,n=e.hasError,o=e.thrownError,r=e.isStopped;n?t.error(o):r&&t.complete()},o.prototype.asObservable=function(){var t=new R;return t.source=this,t},o.create=function(t,e){return new q(t,e)},o}(R),q=function(t){function n(e,n){var o=t.call(this)||this;return o.destination=e,o.source=n,o}return e(n,t),n.prototype.next=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)},n.prototype.error=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)},n.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},n.prototype._subscribe=function(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:l},n}(A);const V=chrome;let W="",F=!1,D="",H="";function U(t){return t.ok?Promise.resolve(t):Promise.reject(t.statusText)}function z(t){return new Promise((e=>{V.tabs.executeScript({code:`(${t})()`},(t=>{e(t)}))}))}function K(t){return new URL(t,W).href}function Y(t,e){return new URL(e,t).href}function G(t){console.log(t),document.getElementById("omnom-content").innerHTML=`<h1>${t}</h1>`}function X(){return W}async function J(t,e){await e(t);const n=[...t.childNodes];return Promise.allSettled(n.map((async t=>{await J(t,e)})))}async function Q(){const t=await new Promise(((t,e)=>{V.storage.local.get(["omnom_url","omnom_token","omnom_debug"],(n=>{n?t(n):e("Could not get Data")}))})).catch(G);var e,n;return await async function(){const t=await new Promise((t=>{V.tabs.query({active:!0,currentWindow:!0},(([e])=>t(e)))}));t&&(W=t.url)}(),e=t.omnom_url||"",D=e,n=t.omnom_token||"",H=n,function(t){F=t}(t.omnom_debug||!1),""==H?Promise.reject("Token not found. Specify it in the extension's options"):""==D?Promise.reject("Server URL not found. Specify it in the extension's option"):Promise.resolve()}function Z(){return D}function tt(){return F}const et="downloading",nt="downloaded",ot="failed";let rt=0,it=0,st=0,at=null,ct=null,ut=null;async function lt(t){if(!t||(t||"").startsWith("data:"))return t;t=K(t),console.log("fetching ",t);const e={method:"GET",cache:tt?"no-cache":"default"},n=new Request(t,e);dt(et);let o=!1;const r=await fetch(n,e).then(U).catch((()=>{dt(ot),o=!0}));if(o)return"";const i=r.headers.get("Content-Type");return dt(nt),-1!=i.toLowerCase().search("text")?await r.text():`data:${i};base64,${function(t){let e="";return[].slice.call(new Uint8Array(t)).forEach((t=>e+=String.fromCharCode(t))),btoa(e)}(await r.arrayBuffer())}`}function dt(t){switch(t){case et:it++;break;case nt:rt++;break;case ot:st++}at.next({downloadCount:it,downloadedCount:rt,failedCount:st})}function ft(){at.unsubscribe();const t=ct.querySelector(".file-download");ct.removeChild(t),it=0,rt=0,st=0}const pt=new Map([["CSSStyleRule",ht],["CSSImportRule",async function(t,e){let n=Y(e,t.href);return await vt(await lt(n),n)}],["CSSMediaRule",async function(t,e){const n=[...t.cssRules];let o="";return await Promise.allSettled(n.map((async(t,n)=>{const r=await yt(t,e);o+=r}))),`@media ${t.media.mediaText}{${o}}`}],["CSSFontFaceRule",async function(t,e){const n=await async function(t,e){const n=t.style.getPropertyValue("src"),o=n.split(/\s+/);let r=!1;for(const t in o){const n=o[t];if(n&&n.startsWith('url("')&&n.endsWith('")')){const i=Y(e,n.substring(5,n.length-2));if(!i.startsWith("data:")){const n=await lt(Y(e,i));o[t]=`url('${n}')`,r=!0}}}if(r)try{return`@font-face {${t.style.cssText.replace(n,o.join(" "))}}`}catch(e){console.log("failed to set font-src:",e),t.style.src=""}}(t,e);return n||t.cssText}],["CSSPageRule",async function(t,e){return t.cssText}],["CSSKeyframesRule",async function(t,e){let n=await vt(t.cssRules,e);return`@keyframes ${t.name}{${n}}`}],["CSSKeyframeRule",async function(t,e){return await ht(t)}],["CSSNamespaceRule",mt],["CSSCounterStyleRule",async function(t,e){return t.cssText}],["CSSSupportsRule",async function(t,e){let n=await vt(t.cssRules,e);return`@supports ${t.conditionText}{${n}}`}],["CSSDocumentRule",mt],["CSSFontFeatureValuesRule",mt],["CSSViewportRule",mt]]);async function ht(t,e){return await yt(t,e)}async function mt(t){return console.log("MEEEH, unknown css rule type: ",t),Promise.reject("MEEEH, unknown css rule type: ",t)}async function yt(t,e){return t&&t.style?(await async function(t,e){const n=t.style.backgroundImage;if(n&&n.startsWith('url("')&&n.endsWith('")')){const o=Y(e,n.substring(5,n.length-2));if(!o.startsWith("data:")){const e=await lt(o);if(e)try{t.style.backgroundImage=`url('${e}')`}catch(e){console.log("failed to set background image: ",e),t.style.backgroundImage=""}else t.style.backgroundImage=""}}}(t,e),await async function(t,e){const n=t.style.listStyleImage;if(n&&n.startsWith('url("')&&n.endsWith('")')){const o=Y(e,n.substring(5,n.length-2));if(!o.startsWith("data:")){const e=await lt(o);if(e)try{t.style.listStyleImage=`url('${e}')`}catch(e){console.log("failed to set list-style-image:",e),t.style.listStyleImage=""}else t.style.listStyleImage=""}}}(t,e),t.cssText):""}async function vt(t,e){("string"==typeof t||t instanceof String)&&(t=function(t){const e=document.implementation.createHTMLDocument(""),n=document.createElement("style");return n.textContent=t,e.body.appendChild(n),n.sheet.cssRules}(t));const n=new Map,o=[...t];return await Promise.allSettled(o.map((async(t,o)=>{const r=pt.get(t.constructor.name);if(r){const i=await r(t,e).catch((t=>console.log(t)));n.set(o,i)}else mt(t)}))),[...new Map([...n.entries()].sort(((t,e)=>t[0]-e[0]))).values()].join("")}const bt=new Map([["SCRIPT",t=>t.remove()],["LINK",async function(t){if(t.attributes.rel&&"stylesheet"==t.attributes.rel.nodeValue.trim().toLowerCase()){if(!t.attributes.href)return;const e=wt++,n=K(t.attributes.href.nodeValue),o=document.createElement("style"),r=await lt(n);o.innerHTML=await vt(r,n),gt.set(e,o),t.remove()}if("icon"==(t.getAttribute("rel")||"").trim().toLowerCase()||"shortcut icon"==(t.getAttribute("rel")||"").trim().toLowerCase()){const e=await lt(t.href);document.getElementById("favicon").value=e,t.href=e}}],["STYLE",async function(t){const e=await vt(t.innerText,X());t.innerText=e}],["IMG",async function(t){const e=await lt(t.getAttribute("src"));t.src=e}]]),gt=new Map;let wt=0;async function St(){const t=await async function(){const t=await z(Et);return t&&t[0]?Promise.resolve(t[0]):Promise.reject("meh")}(),e=document.createElement("html");e.innerHTML=t.html;for(const n in t.attributes)e.setAttribute(n,t.attributes[n]);if(await J(e,_t),function(t){const e=new Map([...gt.entries()].sort(((t,e)=>t[0]-e[0])));let n;n=t.getElementsByTagName("head")?t.getElementsByTagName("head")[0]:t.documentElement,e.forEach((t=>{n.appendChild(t)}))}(e),!document.getElementById("favicon")?.value){const t=await lt(K("/favicon.ico"));if(t){const e=document.createElement("style");e.setAttribute("rel","icon"),e.setAttribute("href",t),document.getElementsByTagName("head")[0].appendChild(e)}}return{dom:`${t.doctype}${e.outerHTML}`,text:e.getElementsByTagName("body")[0].innerText}}function Et(){const t=document.getElementsByTagName("html")[0],e={html:t.cloneNode(!0),attributes:{},title:"",doctype:""};document.doctype&&(e.doctype=(new XMLSerializer).serializeToString(document.doctype)),document.getElementsByTagName("title").length>0&&(e.title=document.getElementsByTagName("title")[0].innerText),[...t.attributes].forEach((t=>e.attributes[t.nodeName]=t.nodeValue));let n=document.getElementsByTagName("canvas");if(n){let t=[];for(let e of n){let n=document.createElement("img");n.src=e.toDataURL(),t.push(n)}let o=e.html.getElementsByTagName("canvas");for(let e in t){let n=o[e];n.parentNode.replaceChild(t[e],n)}}return e.html=e.html.outerHTML,e}async function _t(t){if(t.nodeType!==Node.ELEMENT_NODE)return;const e=bt.get(t.nodeName);await async function(t){const e=[...t.attributes];return Promise.allSettled(e.map((async t=>{if((t.nodeName.startsWith("on")||t.nodeValue.startsWith("javascript:"))&&(t.nodeValue=""),"href"==t.nodeName&&(t.nodeValue=K(t.nodeValue)),"style"==t.nodeName){const e=await vt(`a{${t.nodeValue}}`,X());t.nodeValue=e.substr(4,e.length-6)}if("srcset"==t.nodeName){let e=[];for(let n of t.nodeValue.split(",")){let t=n.trim().split(" ");t[0]=await lt(t[0]),e.push(t.join(" "))}t.nodeValue=e.join(", ")}})))}(t),e&&await e(t)}function Tt(t,e,n){const o=`<div class="control chip-control">\n        <span class="tag is-rounded">\n            ${t}\n            <button type="button" class="delete is-small"></button>\n        </span>\n    </div>`,r=document.createElement("template");r.innerHTML=o,r.content.querySelector("button").addEventListener("click",Ct.bind({},r.content.firstChild,e,n)),e.appendChild(r.content.firstChild)}function Ct(t,e,n){e.removeChild(t),[...e.children].map((t=>t.innerText))}function xt(t,e){let n=[];this.getTags=()=>n,this.renderTags=()=>function(t,e){const n=document.createDocumentFragment();t.forEach((t=>{Tt(t,n)})),e.appendChild(n)}(n,e),t?.addEventListener("change",(o=>{!function(t,e,n){const o=t.target.value;Tt(o,e,n),n.push(o)}(o,e,n),t.value=""}))}!function(){const t=!("undefined"!=typeof InstallTrigger);let e=null,n=new Map,o={onoptions:!1,onafterdownload:!1,onmain:!0},r=null;function i(){const t=document.getElementById("tags"),n=document.getElementById("tag-chips");e=new xt(t,n),document.getElementById("close")?.addEventListener("click",a),document.getElementById("back")?.addEventListener("click",(()=>(function(){const t=r.querySelectorAll("template");[...r.children].forEach((e=>{[...t].includes(e)||r.removeChild(e)}))}(),l([{onoptions:!1},{onafterdownload:!1},{onmain:!0}]),void s()))),document.getElementById("omnom_options")?.addEventListener("click",(()=>async function(){l([{onoptions:!0},{onmain:!1}]);const t=await fetch("./options.html").then((t=>t.text())),e=(new DOMParser).parseFromString(t,"text/html"),n=e.querySelector("template")?.content.cloneNode(!0),o=e.querySelector("script");r.appendChild(n),r.appendChild(function(t){const e=document.createElement("script");return e.src=t.src,e}(o))}())),document.querySelector("form")?.addEventListener("submit",c)}async function s(){document.querySelector("form").action=`${Z()}add_bookmark`,document.getElementById("token").value=H,document.getElementById("url").value=X();const t=await z((()=>document.title));t&&t[0]&&(document.getElementById("title").value=t[0]);const n=await z((()=>window.getSelection().toString()));n&&n[0]&&(document.getElementById("notes").value=n[0]),e.renderTags()}function a(){window.close()}async function c(n){n.preventDefault();const o=new FormData(document.forms.add);var r;o.set("tags",e.getTags().join(",")),l([{onafterdownload:!0},{onmain:!1}]),r=document.getElementById("omnom_status"),at=new A,ct=r,ut=function(t){if(ct){const t=document.createRange();return t.selectNode(ct),t.createContextualFragment('<div class="file-download">\n<h3>Snapshotting in progress...</h3>\n<progress class="progress is-small file-download__progress" value="15" max="100">0%</progress>\n<span id="progress-counter">0 of 0 resources snapshotted</span>\n<h3>Failed requests: <span id="failed-counter">0</span></h3>\n</div>')}}(),ct.appendChild(ut),at.subscribe((t=>{ct.querySelector("#failed-counter").innerText=` ${t.failedCount}`,ct.querySelector("#progress-counter").innerText=`${t.downloadedCount} of ${t.downloadCount} resources snapshotted`;const e=ct.querySelector("progress"),n=(t.downloadedCount+t.failedCount)/t.downloadCount*100;e.value=n})),console.time("createSnapshot");const i=await St();if(console.timeEnd("createSnapshot"),tt())return s=i.dom,void(t?window.open("","omnomDebug","menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes").document.write(s):document.getElementsByTagName("html")[0].innerHTML=s);var s;o.append("snapshot",i.dom),o.append("snapshot_text",i.text);const a={method:"POST",body:o};await fetch(`${Z()}add_bookmark`,a).then((t=>U(t))).then((()=>{ft(),document.getElementById("omnom-content").innerHTML="<h1>Snapshot successfully saved!</h1>"}),(t=>{ft(),G(`Failed to save bookmark! Error: ${t}`)}))}function u(){[...n.values()].forEach((t=>{const e=Object.keys(t.dataset),n=t.parentNode||r;if(e.length){const r=e.some((e=>{const n="true"===t.dataset[e];return o.hasOwnProperty(e)&&o[e]===n})),i=n?[...n.children]?.find((e=>e.id===t.content.children[0].id)):null;i&&!r&&i&&n.removeChild(i),!i&&r&&n.appendChild(t.content.cloneNode(!0))}}))}function l(t){let e=null;t.forEach((t=>{e=Object.keys(t)[0],o.hasOwnProperty(e)&&(o[e]=t[e])})),u(),i()}document.addEventListener("DOMContentLoaded",(function(){!function(){const t=document.querySelectorAll("template");r=document.getElementById("omnom-content"),[...t].forEach((t=>n.set(t.id,t)))}(),u(),i(),Q().then(s,G),console.log("Loaded!")}))}()})()})();